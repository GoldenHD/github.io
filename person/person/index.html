<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸¸æˆå¸‚åœºæ·±åº¦åˆ†æå¹³å°</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/echarts/dist/echarts.min.js"></script>
    <script type="text/javascript">window.PlotlyConfig = { MathJaxConfig: 'local' };</script>
    <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.3.0.min.js"
        integrity="sha256-bO3dS6yCpk9aK4gUpNELtCiDeSYvGYnK7jFI58NQnHI=" crossorigin="anonymous"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
            padding: 0;
        }

        /* èƒŒæ™¯å’Œæ˜Ÿç©ºæ•ˆæœ */
        #background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: linear-gradient(rgba(10, 25, 47, 0.9), rgba(10, 25, 47, 0.9)), url("https://images.unsplash.com/photo-1511512578047-dfb367046420?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80");
            background-size: cover;
            background-position: center;
            opacity: 0.7;
            z-index: -2;
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        .star {
            position: absolute;
            background: #fff;
            border-radius: 50%;
            animation: twinkle 1s infinite;
        }

        @keyframes twinkle {
            0% {
                opacity: 0;
                transform: scale(0);
            }

            50% {
                opacity: 1;
                transform: scale(1);
            }

            100% {
                opacity: 0;
                transform: scale(0);
            }
        }

        /* å¯¼èˆªæ  */
        #daohang {
            display: flex;
            height: 70px;
            align-items: center;
            justify-content: space-between;
            background: rgba(10, 25, 47, 0.9);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            padding: 0 50px;
            position: sticky;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(100, 255, 218, 0.2);
        }

        #daohang li {
            align-items: center;
            font-weight: 600;
            font-size: 16px;
            display: flex;
            flex: 1;
            justify-content: center;
            height: 100%;
            transition: all 0.3s ease;
        }

        #daohang li:hover {
            background: rgba(100, 255, 218, 0.1);
        }

        .line1 {
            display: inline-block;
            height: 30px;
            width: 1px;
            background: rgba(255, 255, 255, 0.3);
        }

        a.daohangTo {
            color: #ccd6f6;
            text-decoration: none;
            padding: 10px 15px;
            border-radius: 4px;
            transition: all 0.3s ease;
            width: 100%;
            text-align: center;
            cursor: pointer;
        }

        a.daohangTo:hover {
            color: #64ffda;
            text-shadow: 0 0 10px rgba(100, 255, 218, 0.5);
        }

        a.back {
            color: #ff6b6b;
        }

        a.back:hover {
            color: #ff5252;
            text-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
        }

        .active-tab {
            color: #64ffda !important;
            text-shadow: 0 0 10px rgba(100, 255, 218, 0.5) !important;
            background: rgba(100, 255, 218, 0.1);
        }

        /* ä¸»è¦å†…å®¹åŒºåŸŸ */
        .container {
            max-width: 1600px;
            margin: 30px auto;
            padding: 0 20px;
        }

        /* æ ‡ç­¾é¡µåˆ‡æ¢ */
        .tab-container {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            background: rgba(23, 42, 70, 0.8);
            border-radius: 12px;
            padding: 10px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 255, 218, 0.1);
        }

        .tab-btn {
            flex: 1;
            background: rgba(17, 34, 64, 0.7);
            border: 1px solid rgba(100, 255, 218, 0.2);
            color: #ccd6f6;
            padding: 15px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            text-align: center;
        }

        .tab-btn:hover {
            background: rgba(100, 255, 218, 0.1);
            transform: translateY(-2px);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, rgba(100, 255, 218, 0.2) 0%, rgba(100, 255, 218, 0.1) 100%);
            color: #64ffda;
            border-color: rgba(100, 255, 218, 0.3);
            box-shadow: 0 5px 15px rgba(100, 255, 218, 0.2);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* é¡¶éƒ¨æ§åˆ¶æ  - é€šç”¨ */
        .control-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            background: rgba(23, 42, 70, 0.8);
            border-radius: 15px;
            padding: 20px 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 255, 218, 0.1);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .page-title {
            color: #64ffda;
            font-size: 28px;
            font-weight: 700;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .page-title::before {
            content: "ğŸ§¬";
            font-size: 32px;
        }

        .control-group {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        /* ä¸‹æ‹‰é€‰æ‹©æ¡† */
        .model-select {
            padding: 12px 25px;
            font-size: 16px;
            background: rgba(10, 25, 47, 0.7);
            border: 1px solid rgba(100, 255, 218, 0.3);
            border-radius: 8px;
            color: #fff;
            min-width: 250px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .model-select:focus {
            outline: none;
            border-color: #64ffda;
            box-shadow: 0 0 10px rgba(100, 255, 218, 0.3);
        }

        .model-select option {
            background: #0a192f;
            color: #fff;
        }

        /* æ“ä½œæŒ‰é’® */
        .action-btn {
            background: linear-gradient(135deg, #64ffda 0%, #00b894 100%);
            color: #0a192f;
            padding: 12px 35px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            min-width: 160px;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(100, 255, 218, 0.4);
        }

        /* ç½‘æ ¼å¸ƒå±€ */
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }

        .grid-2-1 {
            grid-template-columns: 2fr 1fr;
        }

        .full-width {
            grid-column: 1 / 3;
        }

        /* å¡ç‰‡æ ·å¼ */
        .card {
            background: rgba(23, 42, 70, 0.8);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 255, 218, 0.1);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            max-height: 600px;
            overflow-y: auto;
        }

        .card:hover {
            border-color: rgba(100, 255, 218, 0.3);
            transform: translateY(-5px);
        }

        /* å¡ç‰‡æ ‡é¢˜ */
        .card-title {
            color: #64ffda;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(100, 255, 218, 0.2);
        }

        .card-title span {
            color: #8892b0;
            font-size: 14px;
            font-weight: 400;
        }

        /* AIæŠ¥å‘Šå¡ç‰‡ç‰¹æ®Šæ ·å¼ */
        .ai-report-card {
            border-left: 4px solid #60a5fa;
            background: rgba(23, 42, 70, 0.9);
        }

        .ai-report-card .card-title {
            color: #60a5fa;
        }

        .ai-report-card .card-title::before {
            content: "ğŸ§ ";
            margin-right: 10px;
            font-size: 20px;
        }

        /* å›¾è¡¨å®¹å™¨ */
        .chart-container {
            width: 100%;
            height: 350px;
        }

        .network-chart-container {
            width: 100%;
            height: 550px;
            position: relative;
        }

        /* ç‰¹å¾æ ‡ç­¾ */
        .tag {
            background: rgba(100, 255, 218, 0.1);
            color: #64ffda;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 14px;
            border: 1px solid rgba(100, 255, 218, 0.3);
            margin: 8px 8px 0 0;
            display: inline-block;
            transition: all 0.3s ease;
        }

        .tag:hover {
            background: rgba(100, 255, 218, 0.2);
            transform: translateY(-2px);
        }

        .tag b {
            color: #fff;
            margin-right: 5px;
        }

        /* å¤æ‚åº¦æ˜¾ç¤º */
        .complexity-container {
            position: absolute;
            bottom: 25px;
            right: 30px;
            text-align: right;
            z-index: 10;
        }

        .complexity-label {
            color: #8892b0;
            font-size: 12px;
            display: block;
            margin-bottom: 5px;
        }

        .complexity-val {
            color: #f59e0b;
            font-weight: bold;
            font-size: 24px;
            text-shadow: 0 0 10px rgba(245, 158, 11, 0.3);
        }

        /* è¡¨æ ¼æ ·å¼ */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .data-table th {
            text-align: left;
            padding: 15px;
            color: #64ffda;
            font-weight: 600;
            border-bottom: 2px solid rgba(100, 255, 218, 0.2);
            background: rgba(10, 25, 47, 0.5);
        }

        .data-table td {
            text-align: left;
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            color: #ccd6f6;
        }

        .data-table tr:hover {
            background: rgba(100, 255, 218, 0.05);
        }

        .match-score {
            color: #60a5fa;
            font-weight: bold;
            font-size: 16px;
        }

        /* ä¾§è¾¹æ é¢æ¿ - ç”¨äºæ¸¸æˆç±»å‹ç­›é€‰ */
        .panel {
            background: rgba(23, 42, 70, 0.9);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 255, 218, 0.1);
            height: fit-content;
            position: sticky;
            top: 100px;
        }

        .panel-header h3 {
            margin: 0 0 20px 0;
            font-size: 22px;
            color: #64ffda;
            text-shadow: 0 0 10px rgba(100, 255, 218, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-bar {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid rgba(100, 255, 218, 0.3);
            border-radius: 8px;
            margin-bottom: 20px;
            box-sizing: border-box;
            background: rgba(17, 34, 64, 0.7);
            color: #ccd6f6;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .search-bar:focus {
            outline: none;
            border-color: #64ffda;
            box-shadow: 0 0 10px rgba(100, 255, 218, 0.2);
        }

        .selection-tools {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            font-size: 14px;
            color: #8892b0;
        }

        .selection-tools button {
            background: rgba(100, 255, 218, 0.1);
            border: 1px solid rgba(100, 255, 218, 0.3);
            color: #64ffda;
            padding: 6px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .selection-tools button:hover {
            background: rgba(100, 255, 218, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(100, 255, 218, 0.2);
        }

        .type-list {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid rgba(100, 255, 218, 0.1);
            padding: 10px;
            border-radius: 10px;
            background: rgba(17, 34, 64, 0.5);
            margin-bottom: 15px;
        }

        .type-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid rgba(100, 255, 218, 0.05);
            transition: all 0.3s ease;
            border-radius: 8px;
            font-size: 14px;
            margin-bottom: 5px;
            background: rgba(255, 255, 255, 0.02);
        }

        .type-item:hover {
            background: rgba(100, 255, 218, 0.1);
            transform: translateX(5px);
        }

        .type-item.active {
            background: rgba(100, 255, 218, 0.15);
            color: #64ffda;
            font-weight: 600;
            border-left: 3px solid #64ffda;
        }

        .type-item input {
            margin-right: 15px;
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: #64ffda;
        }

        .update-tip {
            margin-top: 10px;
            font-size: 12px;
            color: #64ffda;
            text-align: center;
            font-weight: bold;
            padding: 8px;
            background: rgba(100, 255, 218, 0.1);
            border-radius: 6px;
            border: 1px solid rgba(100, 255, 218, 0.2);
        }

        /* AIåˆ†æåŒºåŸŸ */
        .textarea-box {
            width: 100%;
            height: 100px;
            padding: 20px;
            border: 1px solid rgba(100, 255, 218, 0.3);
            border-radius: 10px;
            resize: none;
            font-size: 15px;
            box-sizing: border-box;
            background: rgba(17, 34, 64, 0.7);
            color: #ccd6f6;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .textarea-box:focus {
            outline: none;
            border-color: #64ffda;
            box-shadow: 0 0 15px rgba(100, 255, 218, 0.2);
        }

        .textarea-box::placeholder {
            color: #8892b0;
        }

        .analyze-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }

        .loading-text {
            color: #64ffda;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .loading-text:before {
            content: "â³";
            font-size: 18px;
        }

        .btn-analyze {
            background: linear-gradient(135deg, rgba(100, 255, 218, 0.2) 0%, rgba(100, 255, 218, 0.1) 100%);
            border: 1px solid rgba(100, 255, 218, 0.3);
            color: #64ffda;
            padding: 12px 35px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            letter-spacing: 1px;
        }

        .btn-analyze:hover:not(:disabled) {
            background: linear-gradient(135deg, rgba(100, 255, 218, 0.3) 0%, rgba(100, 255, 218, 0.2) 100%);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(100, 255, 218, 0.2);
        }

        .btn-analyze:disabled {
            background: rgba(100, 255, 218, 0.1);
            color: #8892b0;
            cursor: not-allowed;
            opacity: 0.6;
        }

        /* ç»“æœåŒºåŸŸ */
        .result-section {
            border-left: 4px solid #64ffda;
            background: rgba(17, 34, 64, 0.7);
            animation: fadeIn 0.5s ease-out;
        }

        .result-section>div:first-child {
            font-weight: 600;
            color: #64ffda;
            margin-bottom: 15px;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .result-section>div:first-child:before {
            content: "ğŸ’¡";
        }

        .result-content {
            line-height: 1.8;
            color: #ccd6f6;
            font-size: 15px;
            white-space: pre-wrap;
            padding: 10px 0;
        }

        .result-content strong {
            color: #64ffda;
        }

        /* æ¸¸æˆè¯„è®ºä»ªè¡¨æ¿æ ·å¼ */
        .dashboard-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .chart-container-large {
            background: rgba(23, 42, 70, 0.8);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-left: 5px solid #64ffda;
            height: 550px;
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 255, 218, 0.1);
        }

        .chart-container-large:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
            border-left: 5px solid #ff6b6b;
        }

        .chart-title-large {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #64ffda;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(100, 255, 218, 0.2);
            display: flex;
            align-items: center;
            text-shadow: 0 0 10px rgba(100, 255, 218, 0.3);
        }

        .chart-title-large i {
            margin-right: 12px;
            color: #64ffda;
            font-size: 1.6rem;
        }

        .chart-wrapper {
            flex: 1;
            min-height: 0;
            position: relative;
        }

        /* Plotlyå›¾è¡¨æ ·å¼é€‚é… */
        .plotly-graph-div {
            width: 100% !important;
            height: 100% !important;
            border-radius: 10px;
            background: rgba(10, 25, 47, 0.5) !important;
        }

        .plotly-graph-div .js-plotly-plot {
            background: transparent !important;
        }

        /* æ´å¯ŸåŒºåŸŸ */
        .insights-section {
            background: rgba(23, 42, 70, 0.8);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 255, 218, 0.1);
        }

        .insights-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 25px;
            color: #64ffda;
            display: flex;
            align-items: center;
            text-shadow: 0 0 10px rgba(100, 255, 218, 0.3);
        }

        .insights-title i {
            margin-right: 12px;
            color: #ff6b6b;
            font-size: 1.6rem;
        }

        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
        }

        .insight-card {
            background: rgba(17, 34, 64, 0.7);
            border-radius: 12px;
            padding: 25px;
            border-left: 4px solid;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            height: 100%;
        }

        .insight-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .insight-card h3 {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #64ffda;
            display: flex;
            align-items: center;
        }

        .insight-card h3 i {
            margin-right: 10px;
            font-size: 1.3rem;
        }

        .insight-card p {
            color: #a8b2d1;
            line-height: 1.7;
            font-size: 0.95rem;
        }

        .card-1 {
            border-color: #3498db;
        }

        .card-2 {
            border-color: #2ecc71;
        }

        .card-3 {
            border-color: #e74c3c;
        }

        .card-4 {
            border-color: #f39c12;
        }

        /* åŠ è½½çŠ¶æ€ */
        .loading-container {
            text-align: center;
            padding: 60px 20px;
        }

        .loading {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 3px solid rgba(100, 255, 218, 0.3);
            border-radius: 50%;
            border-top-color: #64ffda;
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .loading-text {
            color: #64ffda;
            font-size: 16px;
        }

        /* ç©ºçŠ¶æ€ */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #8892b0;
        }

        .empty-icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        /* æ»šåŠ¨æ¡æ ·å¼ */
        .card,
        .type-list {
            scrollbar-width: thin;
            scrollbar-color: rgba(100, 255, 218, 0.3) rgba(23, 42, 70, 0.5);
        }

        .card::-webkit-scrollbar,
        .type-list::-webkit-scrollbar {
            width: 8px;
        }

        .card::-webkit-scrollbar-track,
        .type-list::-webkit-scrollbar-track {
            background: rgba(23, 42, 70, 0.5);
            border-radius: 10px;
        }

        .card::-webkit-scrollbar-thumb,
        .type-list::-webkit-scrollbar-thumb {
            background: rgba(100, 255, 218, 0.3);
            border-radius: 10px;
        }

        .card::-webkit-scrollbar-thumb:hover,
        .type-list::-webkit-scrollbar-thumb:hover {
            background: rgba(100, 255, 218, 0.5);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1400px) {
            .dashboard-container {
                grid-template-columns: 1fr;
            }

            .chart-container-large {
                height: 500px;
            }
        }

        @media (max-width: 1200px) {
            .grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .grid-2-1 {
                grid-template-columns: 1fr;
            }

            .full-width {
                grid-column: 1;
            }

            .network-chart-container {
                height: 450px;
            }
        }

        @media (max-width: 992px) {
            .control-header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }

            .control-group {
                flex-direction: column;
                width: 100%;
            }

            .model-select,
            .action-btn {
                width: 100%;
                max-width: 300px;
            }
        }

        @media (max-width: 768px) {
            #daohang {
                flex-wrap: wrap;
                height: auto;
                padding: 10px;
            }

            #daohang li {
                flex: 1 0 33%;
                margin: 5px 0;
            }

            .container {
                padding: 0 15px;
            }

            .tab-container {
                flex-direction: column;
            }

            .tab-btn {
                padding: 12px;
                font-size: 14px;
            }

            .card {
                padding: 20px;
            }

            .network-chart-container {
                height: 400px;
            }

            .complexity-container {
                position: relative;
                bottom: auto;
                right: auto;
                text-align: center;
                margin-top: 15px;
            }

            .dashboard-container {
                gap: 20px;
            }

            .chart-container-large {
                height: 450px;
                padding: 20px;
            }

            .chart-title-large {
                font-size: 1.2rem;
            }

            .insights-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }

        @media (max-width: 480px) {
            .page-title {
                font-size: 22px;
            }

            #daohang li {
                flex: 1 0 50%;
            }

            .card-title {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .chart-container,
            .network-chart-container {
                height: 300px;
            }

            .chart-container-large {
                height: 400px;
            }
        }

        [v-cloak] {
            display: none;
        }
    </style>
</head>

<body>
    <div id="background"></div>
    <div class="stars"></div>

    <ul id="daohang" type="none">
        <li><a class="daohangTo" href="bangdan.html">æ¸¸æˆæ¦œå•</a></li>
        <div class="line1"></div>
        <li><a class="daohangTo" href="lxfb.html">ç±»å‹åˆ†å¸ƒ</a></li>
        <div class="line1"></div>
        <li><a class="daohangTo" href="zhuye.html">é¦–é¡µ</a></li>
        <div class="line1"></div>
        <li><a class="daohangTo" href="Trend.html">å‘å¸ƒæƒ…å†µ</a></li>
        <div class="line1"></div>
        <li><a class="daohangTo" href="Player.html">ç©å®¶</a></li>
        <div class="line1"></div>
        <li><a class="daohangTo active-tab" id="tab1-btn">ç”¨æˆ·å»ºæ¨¡</a></li>
        <div class="line1"></div>
        <li><a class="daohangTo" id="tab2-btn">è¶‹åŠ¿åˆ†æ</a></li>
        <div class="line1"></div>
        <li><a class="daohangTo" id="tab3-btn">è¯„è®ºæ´å¯Ÿ</a></li>
        <div class="line1"></div>
        <li><a class="back daohangTo" href="Login.html">é€€å‡º</a></li>
    </ul>

    <div class="container">
        <!-- æ ‡ç­¾é¡µåˆ‡æ¢ -->
        <div class="tab-container">
            <button class="tab-btn active" data-tab="tab1">ğŸ§¬ ç”¨æˆ·å—ä¼—ç¥ç»å»ºæ¨¡</button>
            <button class="tab-btn" data-tab="tab2">ğŸ“ˆ æ¸¸æˆç±»å‹è¶‹åŠ¿åˆ†æ</button>
            <button class="tab-btn" data-tab="tab3">ğŸ’¬ æ¸¸æˆè¯„è®ºå…³é”®è¯åˆ†æ</button>
        </div>

        <!-- æ ‡ç­¾é¡µ1: ç”¨æˆ·å—ä¼—ç¥ç»å»ºæ¨¡ -->
        <div id="tab1" class="tab-content active">
            <div class="control-header">
                <div class="page-title">ç”¨æˆ·å—ä¼—ç¥ç»å»ºæ¨¡ç»ˆç«¯</div>
                <div class="control-group">
                    <select v-model="selectedType" class="model-select">
                        <option v-for="c in categories" :key="c" :value="c">{{ c }}</option>
                    </select>
                    <button @click="analyze" class="action-btn">æ‰§è¡Œå»ºæ¨¡æŒ‡ä»¤</button>
                </div>
            </div>

            <!-- åŠ è½½çŠ¶æ€ -->
            <div v-if="loading" class="loading-container">
                <div class="loading"></div>
                <div class="loading-text">æ­£åœ¨åˆ†æç”¨æˆ·æ•°æ®...</div>
            </div>

            <!-- åˆ†æç»“æœ -->
            <div v-if="result && !loading" class="grid">
                <!-- AIæŠ¥å‘Šå¡ç‰‡ -->
                <div class="card full-width ai-report-card">
                    <h3 class="card-title">AI è¡Œä¸šæ·±åº¦ç ”åˆ¤æŠ¥å‘Š</h3>
                    <div style="line-height: 1.8; color: #cbd5e1; white-space: pre-wrap; font-size: 15px;">
                        {{ result.ai_report }}
                    </div>
                </div>

                <!-- ç†æƒ³ç”¨æˆ·æ¨¡å‹ -->
                <div class="card">
                    <h3 class="card-title">ç†æƒ³ç”¨æˆ·å±æ€§ <span>ç‰¹å¾è¦†ç›–</span></h3>
                    <div id="radarChart" class="chart-container"></div>
                    <div style="margin-top: 15px;">
                        <div class="tag" v-for="(v, k) in result.ideal"><b>{{k}}:</b> {{v}}</div>
                    </div>
                </div>

                <!-- ç¥ç»ç½‘ç»œå›¾ -->
                <div class="card" style="position: relative;">
                    <h3 class="card-title">å—ä¼—ç¥ç»è¿æ¥å›¾ <span>ğŸ’¡ ç‚¹å‡»èŠ‚ç‚¹é”å®š | ç‚¹å‡»ç©ºç™½é‡ç½®</span></h3>
                    <div id="networkChart" class="network-chart-container"></div>
                    <div class="complexity-container">
                        <span class="complexity-label">ç½‘ç»œå¤æ‚åº¦</span>
                        <span class="complexity-val">{{ result.complexity }}</span>
                    </div>
                </div>

                <!-- åŒ¹é…ç”¨æˆ·åˆ—è¡¨ -->
                <div class="card full-width">
                    <h3 class="card-title">æ¨¡å‹åŒ¹é…ï¼šæ•°æ®åº“ Top 5 çœŸå®ç§å­ä¸ªä½“</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ç”¨æˆ·ID</th>
                                <th>æ€§åˆ«</th>
                                <th>åœ°åŒº</th>
                                <th>è§’è‰²</th>
                                <th>å…´è¶£</th>
                                <th>åŒ¹é…è¯„åˆ†</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="user in result.real_users">
                                <td>{{ user.user_id }}</td>
                                <td>{{ user.gender }}</td>
                                <td>{{ user.region }}</td>
                                <td>{{ user.role }}</td>
                                <td>{{ user.interest }}</td>
                                <td class="match-score">{{ user.match_score }} / 4</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ç©ºçŠ¶æ€ -->
            <div v-if="!result && !loading" class="empty-state">
                <div class="empty-icon">ğŸ§¬</div>
                <h3>ç­‰å¾…åˆ†ææŒ‡ä»¤</h3>
                <p>è¯·é€‰æ‹©ç”¨æˆ·ç±»å‹å¹¶ç‚¹å‡»"æ‰§è¡Œå»ºæ¨¡æŒ‡ä»¤"å¼€å§‹åˆ†æ</p>
            </div>
        </div>

        <!-- æ ‡ç­¾é¡µ2: æ¸¸æˆç±»å‹è¶‹åŠ¿åˆ†æ -->
        <div id="tab2" class="tab-content">
            <div class="control-header">
                <div class="page-title">æ¸¸æˆæ•°æ®æ·±åº¦åˆ†æç»ˆç«¯</div>
            </div>

            <div class="grid grid-2-1">
                <!-- å·¦ä¾§è¾¹æ  -->
                <div class="panel">
                    <div class="panel-header">
                        <h3>ğŸ® æ¸¸æˆç±»å‹ç­›é€‰</h3>
                        <input type="text" class="search-bar" v-model="searchKey" placeholder="æœç´¢æ¸¸æˆç±»å‹...">
                        <div class="selection-tools">
                            <button @click="selectAll">å…¨é€‰</button>
                            <button @click="selectedTypes = []">æ¸…ç©º</button>
                            <span>å·²é€‰ {{ selectedTypes.length }}</span>
                        </div>
                    </div>

                    <div class="type-list">
                        <label class="type-item" v-for="type in filteredTypes" :key="type"
                            :class="{active: selectedTypes.includes(type)}">
                            <input type="checkbox" :value="type" v-model="selectedTypes">
                            <span>{{ getLabel(type) }}</span>
                        </label>
                    </div>
                    <div class="update-tip">âœ¨ å‹¾é€‰ç±»å‹è‡ªåŠ¨æ›´æ–°å›¾è¡¨</div>
                </div>

                <!-- å³ä¾§ä¸»è¦å†…å®¹ -->
                <div>
                    <!-- å›¾è¡¨åŒºåŸŸ -->
                    <div class="card" style="margin-bottom: 25px;">
                        <h3>ğŸ“ˆ æ¸¸æˆå‘å¸ƒè¶‹åŠ¿åˆ†æ</h3>
                        <div id="trendChart" style="height: 400px;"></div>
                    </div>

                    <!-- AIåˆ†æåŒºåŸŸ -->
                    <div class="card">
                        <h3>ğŸ¤– AI æ·±åº¦è¡Œä¸šåˆ†æ</h3>
                        <textarea id="ai-question" name="question" class="textarea-box" v-model="question"
                            placeholder="è¯·æå‡ºé—®é¢˜ï¼ŒAIå°†åŸºäºé€‰å®šçš„æ¸¸æˆç±»å‹è¿›è¡Œåˆ†æã€‚æ³¨æ„ï¼š2025å¹´åæ•°æ®ä¸ºé¢„æµ‹å€¼ã€‚"></textarea>
                        <div class="analyze-controls">
                            <span v-if="analysisLoading" class="loading-text">AIæ­£åœ¨æ·±åº¦åˆ†æä¸­...</span>
                            <span v-else></span>
                            <button class="btn-analyze" @click="doAnalyze"
                                :disabled="analysisLoading || selectedTypes.length === 0">
                                å¼€å§‹ AI åˆ†æ
                            </button>
                        </div>
                    </div>

                    <!-- ç»“æœå±•ç¤ºåŒºåŸŸ -->
                    <div class="card result-section" v-if="answer" style="margin-top: 25px;">
                        <div>ğŸ’¡ è¡Œä¸šæƒ…æŠ¥å»ºè®®ï¼š</div>
                        <div class="result-content" v-html="formattedAnswer"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ ‡ç­¾é¡µ3: æ¸¸æˆè¯„è®ºå…³é”®è¯åˆ†æ -->
        <div id="tab3" class="tab-content">
            <div class="control-header">
                <div class="page-title">æ¸¸æˆè¯„è®ºå…³é”®è¯åˆ†æä»ªè¡¨æ¿</div>
                <div style="color: #8892b0; font-size: 16px;">
                    åŸºäºSteamæ¸¸æˆè¯„è®ºæ•°æ®çš„ä¸»é¢˜å»ºæ¨¡ä¸æƒ…æ„Ÿåˆ†æå¯è§†åŒ–
                </div>
            </div>

            <div class="dashboard-container">
                <div class="chart-container-large">
                    <div class="chart-title-large">å‰20ä¸ªé«˜é¢‘å…³é”®è¯ä¸»é¢˜</div>
                    <div class="chart-wrapper">
                        <div id="chart1" class="plotly-graph-div" style="height:100%; width:100%;"></div>
                    </div>
                </div>

                <div class="chart-container-large">
                    <div class="chart-title-large">å‰15ä¸ªä¸»é¢˜æƒ…æ„Ÿåˆ†å¸ƒ</div>
                    <div class="chart-wrapper">
                        <div id="chart2" class="plotly-graph-div" style="height:100%; width:100%;"></div>
                    </div>
                </div>

                <div class="chart-container-large">
                    <div class="chart-title-large">å‰5ä¸ªä¸»é¢˜æ—¶é—´è¶‹åŠ¿</div>
                    <div class="chart-wrapper">
                        <div id="chart3" class="plotly-graph-div" style="height:100%; width:100%;"></div>
                    </div>
                </div>

                <div class="chart-container-large">
                    <div class="chart-title-large">æ¸¸æˆä¸ä¸»é¢˜çƒ­åŠ›å›¾</div>
                    <div class="chart-wrapper">
                        <div id="chart4" class="plotly-graph-div" style="height:100%; width:100%;"></div>
                    </div>
                </div>
            </div>

            <div class="insights-section">
                <div class="insights-title">å…³é”®æ´å¯Ÿä¸å‘ç°</div>
                <div class="insights-grid">
                    <div class="insight-card card-1">
                        <h3>é«˜é¢‘ä¸»é¢˜åˆ†æ</h3>
                        <p>"æ¸¸æˆ"æ˜¯è®¨è®ºæœ€å¤šçš„ä¸»é¢˜ï¼Œå…¶æ¬¡æ˜¯"æ–°æ‰‹åŒ…"å’Œ"æŒç»­ä¸æ–­"ã€‚è¿™è¡¨æ˜ç©å®¶æœ€å…³æ³¨æ¸¸æˆæœ¬èº«çš„æ ¸å¿ƒä½“éªŒã€æ–°æ‰‹å…¥é—¨å†…å®¹ä»¥åŠæ¸¸æˆçš„æŒç»­å¯ç©æ€§ã€‚</p>
                    </div>

                    <div class="insight-card card-2">
                        <h3>æ­£é¢æƒ…ç»ªä¸»é¢˜</h3>
                        <p>"åˆä½œæ¨¡å¼"å’Œ"æ¸¸ç©"ä¸»é¢˜ä¸‹æ­£é¢è¯„ä»·è¾ƒå¤šï¼Œè¯´æ˜ç©å®¶å¯¹å¤šäººåˆä½œæ¸¸æˆä½“éªŒå’ŒåŸºæœ¬æ¸¸æˆæ€§è¾ƒä¸ºæ»¡æ„ã€‚</p>
                    </div>

                    <div class="insight-card card-3">
                        <h3>è´Ÿé¢æƒ…ç»ªä¸»é¢˜</h3>
                        <p>"å¾®äº¤æ˜“"ã€"é€€æ¬¾"å’Œ"æ„šè ¢"ç­‰ä¸»é¢˜è´Ÿé¢è¯„ä»·é›†ä¸­ï¼Œåæ˜ äº†ç©å®¶å¯¹æ¸¸æˆå†…è´­ã€é€€æ¬¾æ”¿ç­–ä»¥åŠæŸäº›è®¾è®¡å†³ç­–çš„ä¸æ»¡ã€‚</p>
                    </div>

                    <div class="insight-card card-4">
                        <h3>æ—¶é—´è¶‹åŠ¿å˜åŒ–</h3>
                        <p>éƒ¨åˆ†ä¸»é¢˜å¦‚"æ–°æ‰‹åŒ…"å’Œ"å…è´¹/æ—©æœŸ"çš„è®¨è®ºé¢‘ç‡éšæ—¶é—´æœ‰æ˜¾è‘—å˜åŒ–ï¼Œå¯èƒ½åæ˜ äº†æ¸¸æˆå‘å¸ƒç­–ç•¥å’Œç©å®¶æœŸæœ›çš„æ¼”å˜ã€‚</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–æ˜Ÿç©ºèƒŒæ™¯
        function initStars() {
            const stars = document.querySelector('.stars');
            for (let i = 0; i < 150; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.top = Math.random() * 100 + 'vh';
                star.style.left = Math.random() * 100 + 'vw';
                star.style.width = Math.random() * 3 + 1 + 'px';
                star.style.height = star.style.width;
                star.style.animationDuration = Math.random() * 3 + 1 + 's';
                star.style.animationDelay = Math.random() * 2 + 's';
                stars.appendChild(star);
            }
        }

        // æ ‡ç­¾é¡µåˆ‡æ¢åŠŸèƒ½
        function initTabs() {
            const tabBtns = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');
            const navLinks = document.querySelectorAll('#daohang .daohangTo[id*="tab"]');

            // æ ‡ç­¾é¡µæŒ‰é’®ç‚¹å‡»äº‹ä»¶
            tabBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const tabId = btn.getAttribute('data-tab');

                    // æ›´æ–°æŒ‰é’®çŠ¶æ€
                    tabBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');

                    // æ›´æ–°å†…å®¹æ˜¾ç¤º
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(tabId).classList.add('active');

                    // æ›´æ–°å¯¼èˆªæ çŠ¶æ€
                    navLinks.forEach(link => {
                        link.classList.remove('active-tab');
                        if (link.id === `${tabId}-btn`) {
                            link.classList.add('active-tab');
                        }
                    });
                });
            });

            // å¯¼èˆªæ é“¾æ¥ç‚¹å‡»äº‹ä»¶
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const tabId = link.id.replace('-btn', '');
                    const tabBtn = document.querySelector(`.tab-btn[data-tab="${tabId}"]`);
                    if (tabBtn) tabBtn.click();
                });
            });
        }

        // æ¸¸æˆç±»å‹ç¿»è¯‘æ˜ å°„
        const TRANSLATION_MAP = {
            "automation": "è‡ªåŠ¨åŒ–", "building": "å»ºé€ ", "card game": "å¡ç‰Œ", "combat": "æˆ˜æ–—",
            "crafting": "åˆæˆå·¥è‰º", "crpg": "è§’è‰²æ‰®æ¼”", "cute": "å¯çˆ±", "driving": "é©¾é©¶",
            "early access": "æŠ¢å…ˆä½“éªŒ", "fantasy": "å¥‡å¹»", "pixel graphics": "åƒç´ å›¾å½¢",
            "platformer": "å¹³å°åŠ¨ä½œ", "sexual content": "æˆäººå†…å®¹", "shooter": "å°„å‡»",
            "simulation": "æ¨¡æ‹Ÿ", "souls-like": "ç±»é­‚", "sports": "ä½“è‚²", "stealth": "æ½œè¡Œ",
            "story rich": "å‰§æƒ…ä¸°å¯Œ", "war": "æˆ˜äº‰", "action": "åŠ¨ä½œ", "adventure": "å†’é™©",
            "rpg": "è§’è‰²æ‰®æ¼”", "strategy": "ç­–ç•¥", "horror": "ææ€–", "survival": "ç”Ÿå­˜",
            "open world": "å¼€æ”¾ä¸–ç•Œ", "visual novel": "è§†è§‰å°è¯´", "roguelike": "è‚‰é¸½(Roguelike)",
            "management": "ç»è¥ç®¡ç†", "2d": "2Dæ¸¸æˆ", "2.5d": "2.5Dæ¸¸æˆ", "tactical": "æˆ˜æœ¯",
            "turn-based": "å›åˆåˆ¶", "sandbox": "æ²™ç›’", "fighting": "æ ¼æ–—", "mmorpg": "å¤šäººåœ¨çº¿è”æœº",
            "jrpg": "æ—¥ç³»RPG", "fps": "ç¬¬ä¸€äººç§°å°„å‡»", "puzzle": "ç›Šæ™º", "realistic": "å†™å®", "anime": "åŠ¨æ¼«",
        };

        // æ ‡ç­¾é¡µ1: ç”¨æˆ·å—ä¼—ç¥ç»å»ºæ¨¡çš„Vueåº”ç”¨
        const { createApp: createApp1 } = Vue;
        const app1 = createApp1({
            data() {
                return {
                    categories: [],
                    selectedType: '',
                    result: null,
                    loading: false,
                    radarChart: null,
                    networkChart: null,
                    isLocked: false
                }
            },
            async mounted() {
                try {
                    const res = await axios.get("http://localhost:8000/api/persona/categories");
                    this.categories = res.data.categories;
                    if (this.categories.length > 0) {
                        this.selectedType = this.categories[0];
                        // è‡ªåŠ¨æ‰§è¡Œåˆ†æ
                        this.analyze();
                    }
                } catch (error) {
                    console.error("åŠ è½½åˆ†ç±»å¤±è´¥:", error);
                    // ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
                    this.categories = ["ç¡¬æ ¸ç©å®¶", "ä¼‘é—²ç©å®¶", "ç¤¾äº¤ç©å®¶", "ç«æŠ€ç©å®¶", "æ¢ç´¢ç©å®¶"];
                    this.selectedType = this.categories[0];
                }
            },
            methods: {
                async analyze() {
                    if (!this.selectedType) return;

                    this.loading = true;
                    this.result = null;

                    try {
                        const res = await axios.get(`http://localhost:8000/api/persona/analyze/${this.selectedType}`);
                        this.result = res.data;
                        this.isLocked = false;
                        this.$nextTick(() => {
                            this.drawRadar();
                            this.drawNetwork();
                        });
                    } catch (error) {
                        console.error("åˆ†æå¤±è´¥:", error);
                        // ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
                        this.result = this.generateMockData();
                        this.$nextTick(() => {
                            this.drawRadar();
                            this.drawNetwork();
                        });
                    } finally {
                        this.loading = false;
                    }
                },

                generateMockData() {
                    return {
                        ai_report: "åŸºäºå¯¹" + this.selectedType + "çš„ç”¨æˆ·æ•°æ®åˆ†æï¼Œæˆ‘ä»¬å‘ç°è¿™ç±»ç”¨æˆ·å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š\n\n1. æ¸¸æˆæ—¶é•¿ï¼šå¹³å‡æ¯å‘¨æ¸¸æˆæ—¶é—´15-20å°æ—¶\n2. æ¶ˆè´¹èƒ½åŠ›ï¼šä¸­ç­‰åä¸Šï¼Œæ„¿æ„ä¸ºä¼˜è´¨å†…å®¹ä»˜è´¹\n3. ç¤¾äº¤å€¾å‘ï¼šåå¥½å°å‹ç¤¾äº¤åœˆï¼Œæ³¨é‡æ¸¸æˆå†…ç¤¾äº¤ä½“éªŒ\n4. è®¾å¤‡åå¥½ï¼šä¸»è¦ä½¿ç”¨PCå’Œä¸»æœºå¹³å°\n5. å†…å®¹åå¥½ï¼šæ³¨é‡æ¸¸æˆå‰§æƒ…å’Œè§’è‰²æˆé•¿ç³»ç»Ÿ\n\nå»ºè®®ï¼šé’ˆå¯¹è¿™ç±»ç”¨æˆ·ï¼Œå¯ä»¥è®¾è®¡å…·æœ‰æ·±åº¦å‰§æƒ…å’Œç¤¾äº¤ç³»ç»Ÿçš„æ¸¸æˆï¼ŒåŒæ—¶æä¾›é€‚åº¦çš„ä»˜è´¹å†…å®¹ã€‚",
                        ideal: {
                            "å¹´é¾„": "18-35å²",
                            "æ€§åˆ«": "ç”·æ€§ä¸ºä¸»",
                            "åœ°åŒº": "ä¸€äºŒçº¿åŸå¸‚",
                            "èŒä¸š": "å­¦ç”Ÿ/ITä»ä¸šè€…",
                            "æ”¶å…¥": "ä¸­ç­‰åä¸Š",
                            "æ¸¸æˆåå¥½": "è§’è‰²æ‰®æ¼”ã€ç­–ç•¥æ¸¸æˆ"
                        },
                        radar: [
                            { name: "ç¤¾äº¤æ€§", value: 65, label: "é«˜" },
                            { name: "ç«æŠ€æ€§", value: 45, label: "ä¸­" },
                            { name: "æ¢ç´¢æ€§", value: 70, label: "é«˜" },
                            { name: "æ”¶é›†æ€§", value: 50, label: "ä¸­" },
                            { name: "åˆ›é€ æ€§", value: 40, label: "ä½" },
                            { name: "æˆå°±æ€§", value: 75, label: "é«˜" }
                        ],
                        network: {
                            nodes: [
                                { name: "ç¤¾äº¤éœ€æ±‚", value: 30, category: 0 },
                                { name: "æˆå°±åŠ¨æœº", value: 25, category: 1 },
                                { name: "æ¢ç´¢æ¬²æœ›", value: 35, category: 2 },
                                { name: "æ”¶é›†ç™–å¥½", value: 20, category: 3 },
                                { name: "åˆ›é€ å†²åŠ¨", value: 15, category: 4 },
                                { name: "ç«æŠ€å¿ƒç†", value: 28, category: 5 }
                            ],
                            links: [
                                { source: "ç¤¾äº¤éœ€æ±‚", target: "æˆå°±åŠ¨æœº", value: 0.8 },
                                { source: "æˆå°±åŠ¨æœº", target: "æ¢ç´¢æ¬²æœ›", value: 0.6 },
                                { source: "æ¢ç´¢æ¬²æœ›", target: "æ”¶é›†ç™–å¥½", value: 0.7 },
                                { source: "æ”¶é›†ç™–å¥½", target: "åˆ›é€ å†²åŠ¨", value: 0.4 },
                                { source: "åˆ›é€ å†²åŠ¨", target: "ç«æŠ€å¿ƒç†", value: 0.5 },
                                { source: "ç«æŠ€å¿ƒç†", target: "ç¤¾äº¤éœ€æ±‚", value: 0.9 }
                            ]
                        },
                        complexity: "8.7",
                        real_users: [
                            { user_id: "U1001", gender: "ç”·", region: "åŒ—äº¬", role: "æ ¸å¿ƒç©å®¶", interest: "RPG,ç­–ç•¥", match_score: 3.8 },
                            { user_id: "U1002", gender: "å¥³", region: "ä¸Šæµ·", role: "ä¼‘é—²ç©å®¶", interest: "æ¨¡æ‹Ÿ,ä¼‘é—²", match_score: 3.5 },
                            { user_id: "U1003", gender: "ç”·", region: "å¹¿å·", role: "ç«æŠ€ç©å®¶", interest: "FPS,MOBA", match_score: 3.2 },
                            { user_id: "U1004", gender: "ç”·", region: "æ·±åœ³", role: "æ¢ç´¢ç©å®¶", interest: "å¼€æ”¾ä¸–ç•Œ", match_score: 3.7 },
                            { user_id: "U1005", gender: "å¥³", region: "æ­å·", role: "ç¤¾äº¤ç©å®¶", interest: "MMO,ç¤¾äº¤", match_score: 3.9 }
                        ]
                    };
                },

                drawRadar() {
                    if (!this.result || !this.result.radar) return;

                    if (this.radarChart) this.radarChart.dispose();
                    const chartDom = document.getElementById('radarChart');
                    if (!chartDom) return;

                    this.radarChart = echarts.init(chartDom, 'dark');

                    const option = {
                        backgroundColor: 'transparent',
                        radar: {
                            indicator: this.result.radar.map(i => ({
                                name: `${i.name}\n(${i.label})`,
                                max: 80
                            })),
                            axisName: {
                                color: '#94a3b8',
                                fontSize: 12,
                                fontWeight: 'bold'
                            },
                            splitArea: { show: false },
                            splitLine: {
                                lineStyle: { color: 'rgba(64, 158, 255, 0.2)' }
                            },
                            axisLine: {
                                lineStyle: { color: 'rgba(64, 158, 255, 0.2)' }
                            }
                        },
                        series: [{
                            type: 'radar',
                            data: [{
                                value: this.result.radar.map(i => i.value),
                                name: 'ç‰¹å¾æƒé‡',
                                areaStyle: {
                                    color: new echarts.graphic.RadialGradient(0.5, 0.5, 1, [
                                        { color: 'rgba(64, 158, 255, 0.6)', offset: 0 },
                                        { color: 'rgba(64, 158, 255, 0.1)', offset: 1 }
                                    ])
                                },
                                lineStyle: { color: '#64ffda', width: 3 },
                                symbolSize: 8,
                                itemStyle: { color: '#fff' }
                            }]
                        }]
                    };
                    this.radarChart.setOption(option);

                    // çª—å£å¤§å°å˜åŒ–æ—¶é‡ç»˜
                    window.addEventListener('resize', () => {
                        this.radarChart.resize();
                    });
                },
                drawNetwork() {
                    if (!this.result || !this.result.network) return;

                    if (this.networkChart) this.networkChart.dispose();
                    const chartDom = document.getElementById('networkChart');
                    if (!chartDom) return;

                    this.networkChart = echarts.init(chartDom, 'dark');

                    const nodes = this.result.network.nodes;
                    const links = this.result.network.links;

                    const option = {
                        backgroundColor: 'transparent',
                        tooltip: {
                            trigger: 'item',
                            formatter: (params) => {
                                if (params.data.silent) return "";
                                return params.dataType === 'node' ? `ç‰¹å¾: ${params.name}` : `å¼ºåº¦: ${params.value}`;
                            }
                        },
                        series: [{
                            id: 'mainSeries',
                            type: 'graph',
                            layout: 'force',
                            data: nodes.map(n => ({ ...n, id: n.name })),
                            links: links.map(l => ({ ...l })),
                            roam: true,
                            draggable: true,
                            label: { show: true, position: 'right', color: '#fff' },
                            force: {
                                initLayout: 'circular',
                                repulsion: 400,
                                gravity: 0.1,
                                edgeLength: [100, 180],
                                friction: 0.2
                            },
                            emphasis: {
                                focus: 'adjacency',
                                lineStyle: { width: 10, opacity: 1 }
                            },
                            lineStyle: { color: '#64ffda', opacity: 0.4, width: 2, curveness: 0.1 }
                        }]
                    };

                    this.networkChart.setOption(option);

                    // ç‚¹å‡»èŠ‚ç‚¹é”å®š
                    this.networkChart.on('click', { dataType: 'node' }, (params) => {
                        this.isLocked = true;
                        const targetName = params.name;

                        const currentOpt = this.networkChart.getOption();
                        const currentNodes = currentOpt.series[0].data;

                        const neighbors = new Set();
                        neighbors.add(targetName);
                        links.forEach(l => {
                            if (l.source === targetName) neighbors.add(l.target);
                            if (l.target === targetName) neighbors.add(l.source);
                        });

                        const newNodes = currentNodes.map(n => {
                            const isRelated = neighbors.has(n.name);
                            return {
                                ...n,
                                x: n.x, y: n.y,
                                fixed: true,
                                itemStyle: { opacity: isRelated ? 1 : 0.15 },
                                label: { show: isRelated },
                                silent: !isRelated
                            };
                        });

                        const newLinks = links.map(l => {
                            const isCore = (l.source === targetName || l.target === targetName);
                            return {
                                ...l,
                                lineStyle: {
                                    opacity: isCore ? 1 : 0.02,
                                    width: isCore ? 8 : 1
                                },
                                silent: !isCore
                            };
                        });

                        this.networkChart.setOption({
                            series: [{
                                id: 'mainSeries',
                                data: newNodes,
                                links: newLinks,
                                emphasis: { disabled: true }
                            }]
                        });
                    });

                    // ç‚¹å‡»ç©ºç™½å¤„é‡ç½®
                    this.networkChart.getZr().on('click', (event) => {
                        if (!event.target && this.isLocked) {
                            this.isLocked = false;

                            const resetNodes = nodes.map(n => ({
                                ...n,
                                x: null, y: null,
                                fixed: false,
                                silent: false,
                                itemStyle: { opacity: 1 },
                                label: { show: true }
                            }));

                            const resetLinks = links.map(l => ({
                                ...l,
                                silent: false,
                                lineStyle: { opacity: 0.4, width: 2 }
                            }));

                            this.networkChart.setOption({
                                series: [{
                                    id: 'mainSeries',
                                    data: resetNodes,
                                    links: resetLinks,
                                    emphasis: { disabled: false }
                                }]
                            });

                            this.networkChart.dispatchAction({ type: 'downplay', seriesIndex: 0 });
                        }
                    });

                    // çª—å£å¤§å°å˜åŒ–æ—¶é‡ç»˜
                    window.addEventListener('resize', () => {
                        this.networkChart.resize();
                    });
                }
            }
        });

        // æ ‡ç­¾é¡µ2: æ¸¸æˆç±»å‹è¶‹åŠ¿åˆ†æçš„Vueåº”ç”¨
        const { createApp: createApp2 } = Vue;
        const app2 = createApp2({
            data() {
                return {
                    gameTypes: [],
                    selectedTypes: [],
                    searchKey: "",
                    question: "",
                    answer: "",
                    analysisLoading: false,
                    trendChart: null,
                    chartLoaded: false
                }
            },
            computed: {
                filteredTypes() {
                    return this.gameTypes.filter(t => {
                        const chinese = TRANSLATION_MAP[t] || t;
                        return t.toLowerCase().includes(this.searchKey.toLowerCase()) || chinese.includes(this.searchKey);
                    });
                },
                formattedAnswer() {
                    if (!this.answer) return "";
                    return this.answer.replace(/\n/g, '<br>').replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                }
            },
            watch: {
                selectedTypes: {
                    handler(val) {
                        if (this.chartLoaded && val.length > 0) {
                            this.updateChartOnly();
                        }
                    },
                    deep: true
                }
            },
            async mounted() {
                await this.loadInitialData();
                window.addEventListener('resize', this.handleResize);
            },
            methods: {
                getLabel(en) { return TRANSLATION_MAP[en] || en; },

                initChart() {
                    const chartDom = document.getElementById('trendChart');
                    if (!chartDom) return;
                    this.trendChart = echarts.init(chartDom, 'dark');
                },

                handleResize() {
                    if (this.trendChart) this.trendChart.resize();
                },

                async loadInitialData() {
                    try {
                        const res = await axios.get("http://localhost:8000/api/game/data/overview");
                        this.gameTypes = res.data.game_types;
                        this.selectedTypes = res.data.game_types.slice(0, 3);
                        this.chartLoaded = true;
                        this.$nextTick(() => {
                            this.initChart();
                            this.updateChartOnly();
                        });
                    } catch (e) {
                        console.error("åŠ è½½å¤±è´¥", e);
                        this.gameTypes = ["action", "adventure", "rpg", "strategy", "shooter", "simulation"];
                        this.selectedTypes = ["action", "adventure", "rpg"];
                        this.chartLoaded = true;
                        this.$nextTick(() => {
                            this.initChart();
                            this.updateChartOnly();
                        });
                    }
                },

                async updateChartOnly() {
                    if (this.selectedTypes.length === 0) {
                        if (this.trendChart) this.trendChart.clear();
                        return;
                    }
                    try {
                        const res = await axios.post("http://localhost:8000/api/game/data/chart_only", {
                            categories: this.selectedTypes
                        });
                        this.renderChart(res.data.chart_data);
                    } catch (e) {
                        console.error("å›¾è¡¨æ›´æ–°å¤±è´¥", e);
                        this.renderChart(this.generateMockData());
                    }
                },

                generateMockData() {
                    const mockData = {};
                    const years = ["2020", "2021", "2022", "2023", "2024", "2025"];

                    this.selectedTypes.forEach(type => {
                        mockData[type] = years.map(year => ({
                            year: parseInt(year),
                            value: Math.floor(Math.random() * 500) + 100
                        }));
                    });

                    return mockData;
                },

                async doAnalyze() {
                    if (!this.question.trim()) {
                        alert("è¯·è¾“å…¥åˆ†æé—®é¢˜ï¼");
                        return;
                    }

                    if (this.selectedTypes.length === 0) {
                        alert("è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªæ¸¸æˆç±»å‹ï¼");
                        return;
                    }

                    this.analysisLoading = true;
                    try {
                        const res = await axios.post("http://localhost:8000/api/game/data/query", {
                            user_question: this.question,
                            category: this.selectedTypes
                        });
                        this.answer = res.data.answer;
                    } catch (e) {
                        console.error("AIåˆ†æå¤±è´¥", e);
                        const typesStr = this.selectedTypes.map(t => TRANSLATION_MAP[t] || t).join("ã€");
                        this.answer = `æ ¹æ®å¯¹${typesStr}ç­‰æ¸¸æˆç±»å‹çš„å†å²æ•°æ®åˆ†æï¼Œç»“åˆå½“å‰å¸‚åœºè¶‹åŠ¿ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°ä»¥ä¸‹æƒ…å†µï¼š

**1. å¸‚åœºè¶‹åŠ¿åˆ†æ**
è¿‘å¹´æ¥ï¼Œæ‰€é€‰ç±»å‹çš„æ¸¸æˆæ•°é‡å‘ˆç°ç¨³æ­¥å¢é•¿æ€åŠ¿ï¼Œç‰¹åˆ«æ˜¯åœ¨2022-2023å¹´æœŸé—´å‡ºç°äº†æ˜¾è‘—çš„å¢é•¿å³°å€¼ã€‚é¢„è®¡æœªæ¥ä¸¤å¹´ä»å°†ä¿æŒå¢é•¿è¶‹åŠ¿ï¼Œä½†å¢é€Ÿå¯èƒ½æœ‰æ‰€æ”¾ç¼“ã€‚

**2. ç”¨æˆ·åå¥½æ´å¯Ÿ**
ä»ç©å®¶åé¦ˆå’Œå¸‚åœºè¡¨ç°æ¥çœ‹ï¼Œèåˆå¤šç±»å‹å…ƒç´ çš„æ¸¸æˆæ›´å—æ¬¢è¿ã€‚å»ºè®®åœ¨æ¸¸æˆè®¾è®¡ä¸­å¯ä»¥é€‚å½“è€ƒè™‘è·¨ç±»å‹çš„åˆ›æ–°ç»„åˆã€‚

**3. å‘å±•å»ºè®®**
- å…³æ³¨ç§»åŠ¨ç«¯é€‚é…å’Œä¼˜åŒ–
- åŠ å¼ºç¤¾äº¤å’Œå¤šäººæ¸¸æˆåŠŸèƒ½
- æ³¨é‡å‰§æƒ…å’Œä¸–ç•Œè§‚æ„å»º
- ä¼˜åŒ–æ–°æ‰‹å¼•å¯¼å’Œç”¨æˆ·ä½“éªŒ

**4. é£é™©è¯„ä¼°**
éœ€å…³æ³¨å¸‚åœºç«äº‰åŠ å‰§å’ŒæŠ€æœ¯è¿­ä»£å¸¦æ¥çš„æŒ‘æˆ˜ï¼Œå»ºè®®å»ºç«‹å·®å¼‚åŒ–ç«äº‰ä¼˜åŠ¿ã€‚`;
                    }
                    finally {
                        this.analysisLoading = false;
                    }
                },

                selectAll() { this.selectedTypes = [...this.gameTypes]; },

                renderChart(chartData) {
                    if (!chartData || Object.keys(chartData).length === 0) return;
                    if (!this.trendChart) this.initChart();

                    // æå–æ‰€æœ‰æ•°æ®ä¸­å‡ºç°è¿‡çš„å¹´ä»½ï¼Œå¹¶æ’åº
                    const allYears = new Set();
                    Object.values(chartData).forEach(series => {
                        series.forEach(item => allYears.add(item.year.toString()));
                    });
                    const sortedYears = Array.from(allYears).sort((a, b) => parseInt(a) - parseInt(b));

                    // æ„é€ ç³»åˆ—æ•°æ®
                    const series = Object.keys(chartData).map(name => ({
                        name: this.getLabel(name),
                        type: 'line',
                        smooth: true,
                        symbolSize: 8,
                        lineStyle: {
                            width: 3,
                            shadowColor: 'rgba(100, 255, 218, 0.5)',
                            shadowBlur: 10
                        },
                        itemStyle: {
                            color: '#64ffda',
                            borderColor: '#fff',
                            borderWidth: 2
                        },
                        emphasis: {
                            focus: 'series',
                            itemStyle: {
                                color: '#fff',
                                borderColor: '#64ffda',
                                borderWidth: 3,
                                shadowColor: 'rgba(100, 255, 218, 0.8)',
                                shadowBlur: 15
                            }
                        },
                        label: {
                            show: true,
                            position: 'top',
                            color: '#ccd6f6',
                            fontSize: 12,
                            fontWeight: 'bold',
                            formatter: function (params) {
                                return params.value[1];
                            }
                        },
                        data: chartData[name].map(d => [d.year.toString(), d.value])
                    }));

                    const option = {
                        title: {
                            text: 'æ¸¸æˆå‘å¸ƒæ•°é‡å¹´åº¦è¶‹åŠ¿',
                            left: 'center',
                            textStyle: {
                                color: '#64ffda',
                                fontSize: 18,
                                fontWeight: 'bold'
                            }
                        },
                        tooltip: {
                            trigger: 'axis',
                            backgroundColor: 'rgba(10, 25, 47, 0.9)',
                            borderColor: '#64ffda',
                            borderWidth: 1,
                            textStyle: {
                                color: '#ccd6f6'
                            },
                            formatter: (params) => {
                                let html = `<div style="font-weight:bold;color:#64ffda">${params[0].axisValue}å¹´</div>`;
                                params.forEach(p => {
                                    const isPredict = parseInt(p.axisValue) >= 2024;
                                    html += `<div style="margin-top:5px">
                                        <span style="display:inline-block;width:12px;height:12px;border-radius:50%;background:${p.color};margin-right:5px"></span>
                                        ${p.seriesName}: <span style="color:#fff;font-weight:bold">${p.value[1]}æ¬¾</span>
                                        ${isPredict ? '<span style="color:#ff6b6b;font-size:12px">(é¢„æµ‹)</span>' : ''}
                                    </div>`;
                                });
                                return html;
                            }
                        },
                        legend: {
                            type: 'scroll',
                            bottom: 10,
                            textStyle: {
                                color: '#ccd6f6'
                            }
                        },
                        grid: {
                            left: '5%',
                            right: '5%',
                            bottom: '15%',
                            top: '15%',
                            containLabel: true,
                            backgroundColor: 'rgba(10, 25, 47, 0.5)',
                            borderColor: 'rgba(100, 255, 218, 0.1)'
                        },
                        xAxis: {
                            type: 'category',
                            boundaryGap: false,
                            data: sortedYears,
                            axisLine: {
                                lineStyle: {
                                    color: '#64ffda'
                                }
                            },
                            axisLabel: {
                                rotate: 30,
                                color: '#ccd6f6'
                            },
                            splitLine: {
                                lineStyle: {
                                    color: 'rgba(100, 255, 218, 0.1)',
                                    type: 'dashed'
                                }
                            }
                        },
                        yAxis: {
                            type: 'value',
                            name: 'å‘å¸ƒæ•°é‡',
                            nameTextStyle: {
                                color: '#ccd6f6'
                            },
                            axisLine: {
                                lineStyle: {
                                    color: '#64ffda'
                                }
                            },
                            axisLabel: {
                                color: '#ccd6f6'
                            },
                            splitLine: {
                                lineStyle: {
                                    color: 'rgba(100, 255, 218, 0.1)',
                                    type: 'dashed'
                                }
                            }
                        },
                        markArea: {
                            silent: true,
                            itemStyle: { color: 'rgba(100, 255, 218, 0.05)' },
                            data: [[{ name: 'é¢„æµ‹åŒºé—´', xAxis: '2024' }, { xAxis: sortedYears[sortedYears.length - 1] }]]
                        },
                        dataZoom: [
                            { type: 'inside', start: 0, end: 100 },
                            {
                                type: 'slider',
                                bottom: 45,
                                start: 0,
                                end: 100,
                                backgroundColor: 'rgba(17, 34, 64, 0.7)',
                                dataBackground: {
                                    lineStyle: {
                                        color: 'rgba(100, 255, 218, 0.3)'
                                    },
                                    areaStyle: {
                                        color: 'rgba(100, 255, 218, 0.1)'
                                    }
                                },
                                selectedDataBackground: {
                                    lineStyle: {
                                        color: '#64ffda'
                                    },
                                    areaStyle: {
                                        color: 'rgba(100, 255, 218, 0.2)'
                                    }
                                },
                                textStyle: {
                                    color: '#ccd6f6'
                                }
                            }
                        ],
                        series: series
                    };

                    this.trendChart.clear();
                    this.trendChart.setOption(option);

                    setTimeout(() => {
                        this.trendChart.resize();
                    }, 100);
                }
            }
        });

        // åˆå§‹åŒ–Plotlyå›¾è¡¨
        function initPlotlyCharts() {
            // å›¾è¡¨1: å‰20ä¸ªé«˜é¢‘å…³é”®è¯ä¸»é¢˜
            if (document.getElementById("chart1")) {
                Plotly.newPlot("chart1", [{
                    "hovertemplate": "é¢‘ç‡=%{marker.color}<br>ä¸»é¢˜=%{y}<extra></extra>",
                    "legendgroup": "",
                    "marker": {
                        "color": [1200, 950, 870, 780, 720, 680, 650, 620, 590, 560, 530, 500, 480, 460, 440, 420, 400, 380, 360, 340],
                        "coloraxis": "coloraxis",
                        "pattern": { "shape": "" }
                    },
                    "name": "",
                    "orientation": "h",
                    "showlegend": false,
                    "textposition": "auto",
                    "x": [1200, 950, 870, 780, 720, 680, 650, 620, 590, 560, 530, 500, 480, 460, 440, 420, 400, 380, 360, 340],
                    "xaxis": "x",
                    "y": ["ä¸»é¢˜1: æ¸¸æˆ", "ä¸»é¢˜13: æ–°æ‰‹åŒ…", "ä¸»é¢˜25: æŒç»­ä¸æ–­", "ä¸»é¢˜28: å±å¹•", "ä¸»é¢˜24: å…è´¹/æ—©æœŸ", "ä¸»é¢˜3: ç±»ä¼¼ä¸€åŠ", "ä¸»é¢˜17: æ¸¸ç©", "ä¸»é¢˜9: æ„šè ¢", "ä¸»é¢˜10: åˆä½œæ¨¡å¼", "ä¸»é¢˜7: æ¸¸æˆç±»å‹", "ä¸»é¢˜26: æ­¦å™¨", "ä¸»é¢˜19: å¾®äº¤æ˜“", "ä¸»é¢˜21: å¤§å°", "ä¸»é¢˜5: ä»“åº“", "ä¸»é¢˜16: é€€æ¬¾", "ä¸»é¢˜29: æƒ³è¦", "ä¸»é¢˜12: ç¨åæ¨å‡º", "ä¸»é¢˜20: å‰ªè´´ç”»", "ä¸»é¢˜22: å„¿ç«¥", "ä¸»é¢˜23: 50-100"],
                    "yaxis": "y",
                    "type": "bar"
                }], {
                    "xaxis": {
                        "title": { "text": "é¢‘ç‡" },
                        "gridcolor": "rgba(100, 255, 218, 0.1)",
                        "linecolor": "#64ffda",
                        "zerolinecolor": "rgba(100, 255, 218, 0.2)"
                    },
                    "yaxis": {
                        "title": { "text": "ä¸»é¢˜" },
                        "categoryorder": "total ascending",
                        "gridcolor": "rgba(100, 255, 218, 0.1)",
                        "linecolor": "#64ffda",
                        "zerolinecolor": "rgba(100, 255, 218, 0.2)"
                    },
                    "coloraxis": {
                        "colorbar": {
                            "title": { "text": "é¢‘ç‡" },
                            "tickfont": { "color": "#ccd6f6" }
                        },
                        "colorscale": [[0.0, "rgb(247,251,255)"], [0.125, "rgb(222,235,247)"], [0.25, "rgb(198,219,239)"], [0.375, "rgb(158,202,225)"], [0.5, "rgb(107,174,214)"], [0.625, "rgb(66,146,198)"], [0.75, "rgb(33,113,181)"], [0.875, "rgb(8,81,156)"], [1.0, "rgb(8,48,107)"]]
                    },
                    "title": {
                        "text": "å‰20ä¸ªé«˜é¢‘å…³é”®è¯ä¸»é¢˜åˆ†å¸ƒ",
                        "font": { "color": "#64ffda", "size": 20 }
                    },
                    "paper_bgcolor": "rgba(0,0,0,0)",
                    "plot_bgcolor": "rgba(10, 25, 47, 0.5)",
                    "font": { "color": "#ccd6f6" },
                    "barmode": "relative"
                }, { "responsive": true });
            }

            // å›¾è¡¨2: å‰15ä¸ªä¸»é¢˜æƒ…æ„Ÿåˆ†å¸ƒ
            if (document.getElementById("chart2")) {
                Plotly.newPlot("chart2", [{
                    "hovertemplate": "æƒ…æ„Ÿæ ‡ç­¾=è´Ÿé¢<br>é¢‘ç‡=%{x}<br>ä¸»é¢˜=%{y}<extra></extra>",
                    "legendgroup": "è´Ÿé¢",
                    "marker": { "color": "#DC143C", "pattern": { "shape": "" } },
                    "name": "è´Ÿé¢",
                    "orientation": "h",
                    "showlegend": true,
                    "textposition": "auto",
                    "x": [320, 280, 260, 240, 220, 200, 180, 160, 150, 140, 130, 120, 110, 100, 90],
                    "xaxis": "x",
                    "y": ["ä¸»é¢˜10: åˆä½œæ¨¡å¼", "ä¸»é¢˜13: æ–°æ‰‹åŒ…", "ä¸»é¢˜16: é€€æ¬¾", "ä¸»é¢˜17: æ¸¸ç©", "ä¸»é¢˜19: å¾®äº¤æ˜“", "ä¸»é¢˜1: æ¸¸æˆ", "ä¸»é¢˜21: å¤§å°", "ä¸»é¢˜24: å…è´¹/æ—©æœŸ", "ä¸»é¢˜25: æŒç»­ä¸æ–­", "ä¸»é¢˜26: æ­¦å™¨", "ä¸»é¢˜28: å±å¹•", "ä¸»é¢˜3: ç±»ä¼¼ä¸€åŠ", "ä¸»é¢˜5: ä»“åº“", "ä¸»é¢˜7: æ¸¸æˆç±»å‹", "ä¸»é¢˜9: æ„šè ¢"],
                    "yaxis": "y",
                    "type": "bar"
                },
                {
                    "hovertemplate": "æƒ…æ„Ÿæ ‡ç­¾=æ­£é¢<br>é¢‘ç‡=%{x}<br>ä¸»é¢˜=%{y}<extra></extra>",
                    "legendgroup": "æ­£é¢",
                    "marker": { "color": "#2E8B57", "pattern": { "shape": "" } },
                    "name": "æ­£é¢",
                    "orientation": "h",
                    "showlegend": true,
                    "textposition": "auto",
                    "x": [480, 420, 390, 360, 330, 300, 270, 240, 210, 180, 150, 120, 90, 60, 30],
                    "xaxis": "x",
                    "y": ["ä¸»é¢˜10: åˆä½œæ¨¡å¼", "ä¸»é¢˜13: æ–°æ‰‹åŒ…", "ä¸»é¢˜16: é€€æ¬¾", "ä¸»é¢˜17: æ¸¸ç©", "ä¸»é¢˜19: å¾®äº¤æ˜“", "ä¸»é¢˜1: æ¸¸æˆ", "ä¸»é¢˜21: å¤§å°", "ä¸»é¢˜24: å…è´¹/æ—©æœŸ", "ä¸»é¢˜25: æŒç»­ä¸æ–­", "ä¸»é¢˜26: æ­¦å™¨", "ä¸»é¢˜28: å±å¹•", "ä¸»é¢˜3: ç±»ä¼¼ä¸€åŠ", "ä¸»é¢˜5: ä»“åº“", "ä¸»é¢˜7: æ¸¸æˆç±»å‹", "ä¸»é¢˜9: æ„šè ¢"],
                    "yaxis": "y",
                    "type": "bar"
                }], {
                    "xaxis": {
                        "title": { "text": "é¢‘ç‡" },
                        "gridcolor": "rgba(100, 255, 218, 0.1)",
                        "linecolor": "#64ffda",
                        "zerolinecolor": "rgba(100, 255, 218, 0.2)"
                    },
                    "yaxis": {
                        "title": { "text": "ä¸»é¢˜" },
                        "categoryorder": "total ascending",
                        "gridcolor": "rgba(100, 255, 218, 0.1)",
                        "linecolor": "#64ffda",
                        "zerolinecolor": "rgba(100, 255, 218, 0.2)"
                    },
                    "legend": {
                        "title": { "text": "æƒ…æ„Ÿæ ‡ç­¾", "font": { "color": "#64ffda" } },
                        "tracegroupgap": 0,
                        "font": { "color": "#ccd6f6" }
                    },
                    "title": {
                        "text": "å‰15ä¸ªä¸»é¢˜çš„æƒ…æ„Ÿåˆ†å¸ƒå¯¹æ¯”",
                        "font": { "color": "#64ffda", "size": 20 }
                    },
                    "paper_bgcolor": "rgba(0,0,0,0)",
                    "plot_bgcolor": "rgba(10, 25, 47, 0.5)",
                    "font": { "color": "#ccd6f6" },
                    "barmode": "relative"
                }, { "responsive": true });
            }
        }

        // é¡µé¢åŠ è½½åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function () {
            initStars();
            initTabs();

            // ä¸ºæ¯ä¸ªæ ‡ç­¾é¡µå†…å®¹åˆ›å»ºVueåº”ç”¨
            const tab1Content = document.getElementById('tab1');
            if (tab1Content) {
                app1.mount('#tab1');
            }

            const tab2Content = document.getElementById('tab2');
            if (tab2Content) {
                app2.mount('#tab2');
            }

            // åˆå§‹åŒ–Plotlyå›¾è¡¨ï¼ˆåœ¨æ ‡ç­¾é¡µ3æ˜¾ç¤ºæ—¶åˆå§‹åŒ–ï¼‰
            const tab3Btn = document.querySelector('.tab-btn[data-tab="tab3"]');
            if (tab3Btn) {
                tab3Btn.addEventListener('click', function () {
                    setTimeout(() => {
                        if (document.getElementById('tab3').classList.contains('active')) {
                            initPlotlyCharts();
                        }
                    }, 100);
                });
            }

            // é»˜è®¤æ¿€æ´»ç¬¬ä¸€ä¸ªæ ‡ç­¾é¡µ
            document.querySelector('.tab-btn[data-tab="tab1"]').click();
        });
    </script>
</body>

</html>